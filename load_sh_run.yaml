---
- name: Konfiguration vom TFTP-Server auf Switch anwenden
  hosts: switches
  gather_facts: no
  become: yes
  become_method: enable
  vars:
    tftp_server: "192.168.100.132"  # <-- Aktualisierte IP-Adresse
    config_file: "backups/switch_show_run_Switch01_20250303.txt"  # <-- Pfad zur Datei im backups-Ordner

  tasks:
    - name: "Konfigurationsmodus: 'file prompt quiet' aktivieren"
      ios_config:
        lines:
          - file prompt quiet
        match: exact

    - name: Konfiguration vom TFTP-Server Ã¼bernehmen
      ios_command:
        commands:
          - copy tftp://{{ tftp_server }}/{{ config_file }} running-config
      register: copy_result

    - name: Ergebnis anzeigen
      debug:
        var: copy_result
